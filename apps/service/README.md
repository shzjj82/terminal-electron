<p align="center">
  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
</p>

[circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
[circleci-url]: https://circleci.com/gh/nestjs/nest

  <p align="center">A progressive <a href="http://nodejs.org" target="_blank">Node.js</a> framework for building efficient and scalable server-side applications.</p>
    <p align="center">
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/v/@nestjs/core.svg" alt="NPM Version" /></a>
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
<a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
<a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
<a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
<a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
  <a href="https://paypal.me/kamilmysliwiec" target="_blank"><img src="https://img.shields.io/badge/Donate-PayPal-ff3f59.svg" alt="Donate us"/></a>
    <a href="https://opencollective.com/nest#sponsor"  target="_blank"><img src="https://img.shields.io/badge/Support%20us-Open%20Collective-41B883.svg" alt="Support us"></a>
  <a href="https://twitter.com/nestframework" target="_blank"><img src="https://img.shields.io/twitter/follow/nestframework.svg?style=social&label=Follow" alt="Follow us on Twitter"></a>
</p>
  <!--[![Backers on Open Collective](https://opencollective.com/nest/backers/badge.svg)](https://opencollective.com/nest#backer)
  [![Sponsors on Open Collective](https://opencollective.com/nest/sponsors/badge.svg)](https://opencollective.com/nest#sponsor)-->

## Description

[Nest](https://github.com/nestjs/nest) framework TypeScript starter repository.

## Project setup

```bash
$ pnpm install
```

## Compile and run the project

```bash
# development
$ pnpm run start

# watch mode
$ pnpm run start:dev

# production mode
$ pnpm run start:prod
```

## Run tests

```bash
# unit tests
$ pnpm run test

# e2e tests
$ pnpm run test:e2e

# test coverage
$ pnpm run test:cov
```

## Deployment

When you're ready to deploy your NestJS application to production, there are some key steps you can take to ensure it runs as efficiently as possible. Check out the [deployment documentation](https://docs.nestjs.com/deployment) for more information.

If you are looking for a cloud-based platform to deploy your NestJS application, check out [Mau](https://mau.nestjs.com), our official platform for deploying NestJS applications on AWS. Mau makes deployment straightforward and fast, requiring just a few simple steps:

```bash
$ pnpm install -g mau
$ mau deploy
```

With Mau, you can deploy your application in just a few clicks, allowing you to focus on building features rather than managing infrastructure.

## Resources

Check out a few resources that may come in handy when working with NestJS:

- Visit the [NestJS Documentation](https://docs.nestjs.com) to learn more about the framework.
- For questions and support, please visit our [Discord channel](https://discord.gg/G7Qnnhy).
- To dive deeper and get more hands-on experience, check out our official video [courses](https://courses.nestjs.com/).
- Deploy your application to AWS with the help of [NestJS Mau](https://mau.nestjs.com) in just a few clicks.
- Visualize your application graph and interact with the NestJS application in real-time using [NestJS Devtools](https://devtools.nestjs.com).
- Need help with your project (part-time to full-time)? Check out our official [enterprise support](https://enterprise.nestjs.com).
- To stay in the loop and get updates, follow us on [X](https://x.com/nestframework) and [LinkedIn](https://linkedin.com/company/nestjs).
- Looking for a job, or have a job to offer? Check out our official [Jobs board](https://jobs.nestjs.com).

## Support

Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).

## Stay in touch

- Author - [Kamil MyÅ›liwiec](https://twitter.com/kammysliwiec)
- Website - [https://nestjs.com](https://nestjs.com/)
- Twitter - [@nestframework](https://twitter.com/nestframework)

## License

Nest is [MIT licensed](https://github.com/nestjs/nest/blob/master/LICENSE).

# Terminal Electron Service

NestJSåç«¯æœåŠ¡ï¼Œä¸ºTerminal Electronåº”ç”¨æä¾›äº‘æœåŠ¡æ”¯æŒã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” ç”¨æˆ·è®¤è¯ï¼ˆæ³¨å†Œ/ç™»å½•ï¼‰
- ğŸ–¥ï¸ æœåŠ¡å™¨ç®¡ç†
- ğŸ”‘ SSHå¯†é’¥ç®¡ç†
- ğŸ”„ ç«¯å£è½¬å‘ç®¡ç†
- ğŸ“± æœ¬åœ°æ•°æ®åŒæ­¥

## å®‰è£…å’Œè¿è¡Œ

### 1. å®‰è£…ä¾èµ–

```bash
pnpm install
```

### 2. ç¯å¢ƒé…ç½®

ç¯å¢ƒå˜é‡æ–‡ä»¶ä½äºé¡¹ç›®æ ¹ç›®å½•çš„ `env/` ç›®å½•ï¼š

- `env/development.env` - å¼€å‘ç¯å¢ƒé…ç½®
- `env/production.env` - ç”Ÿäº§ç¯å¢ƒé…ç½®

### 3. æ•°æ®åº“é…ç½®

åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œåº”ç”¨ä¼šè‡ªåŠ¨ï¼š
- æ£€æŸ¥PostgreSQLè¿æ¥
- åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
- åˆ›å»ºæ‰€éœ€çš„è¡¨ç»“æ„

**æ³¨æ„**: 
- ç¡®ä¿PostgreSQLæœåŠ¡æ­£åœ¨è¿è¡Œ
- ä¸è¦åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼Œé¿å…é…ç½®å†²çª
- é…ç½®ä¼šè‡ªåŠ¨ä» `env/development.env` æˆ– `env/production.env` åŠ è½½

### 3. å¯åŠ¨æœåŠ¡

å¼€å‘æ¨¡å¼ï¼š
```bash
pnpm start:dev
```

ç”Ÿäº§æ¨¡å¼ï¼š
```bash
pnpm build
pnpm start:prod
```

## API æ¥å£

### è®¤è¯æ¥å£

#### æ³¨å†Œç”¨æˆ·
```http
POST /auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "username": "username",
  "password": "password123"
}
```

#### ç”¨æˆ·ç™»å½•
```http
POST /auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
```

### æœåŠ¡å™¨ç®¡ç†

#### è·å–æ‰€æœ‰æœåŠ¡å™¨
```http
GET /servers
Authorization: Bearer <token>
```

#### åˆ›å»ºæœåŠ¡å™¨
```http
POST /servers
Authorization: Bearer <token>
Content-Type: application/json

{
  "localId": "local-uuid",
  "name": "My Server",
  "host": "192.168.1.100",
  "port": 22,
  "username": "root",
  "password": "password",
  "authType": "password",
  "description": "My local server"
}
```

#### åŒæ­¥æœ¬åœ°æ•°æ®
```http
POST /servers/sync
Authorization: Bearer <token>
Content-Type: application/json

[
  {
    "localId": "local-uuid-1",
    "name": "Server 1",
    "host": "192.168.1.100",
    "port": 22,
    "username": "root",
    "authType": "password"
  },
  {
    "localId": "local-uuid-2",
    "name": "Server 2",
    "host": "192.168.1.101",
    "port": 22,
    "username": "admin",
    "authType": "key",
    "keyId": "key-uuid"
  }
]
```

### å¯†é’¥ç®¡ç†

#### è·å–æ‰€æœ‰å¯†é’¥
```http
GET /keys
Authorization: Bearer <token>
```

#### åˆ›å»ºå¯†é’¥
```http
POST /keys
Authorization: Bearer <token>
Content-Type: application/json

{
  "localId": "local-key-uuid",
  "name": "My SSH Key",
  "type": "rsa",
  "privateKey": "-----BEGIN RSA PRIVATE KEY-----...",
  "passphrase": "optional-passphrase",
  "description": "My SSH key for server access"
}
```

#### åŒæ­¥æœ¬åœ°å¯†é’¥
```http
POST /keys/sync
Authorization: Bearer <token>
Content-Type: application/json

[
  {
    "localId": "local-key-uuid",
    "name": "Key 1",
    "type": "rsa",
    "privateKey": "-----BEGIN RSA PRIVATE KEY-----..."
  }
]
```

### ç«¯å£è½¬å‘ç®¡ç†

#### è·å–æ‰€æœ‰ç«¯å£è½¬å‘
```http
GET /port-forwards
Authorization: Bearer <token>
```

#### åˆ›å»ºç«¯å£è½¬å‘
```http
POST /port-forwards
Authorization: Bearer <token>
Content-Type: application/json

{
  "localId": "local-forward-uuid",
  "name": "Web Server Forward",
  "type": "local",
  "localHost": "127.0.0.1",
  "localPort": 8080,
  "remoteHost": "127.0.0.1",
  "remotePort": 80,
  "serverId": "server-uuid"
}
```

#### åŒæ­¥æœ¬åœ°ç«¯å£è½¬å‘
```http
POST /port-forwards/sync
Authorization: Bearer <token>
Content-Type: application/json

[
  {
    "localId": "local-forward-uuid",
    "name": "Forward 1",
    "type": "local",
    "localHost": "127.0.0.1",
    "localPort": 8080,
    "remoteHost": "127.0.0.1",
    "remotePort": 80
  }
]
```

## æ•°æ®åŒæ­¥ç­–ç•¥

### æœ¬åœ°IDå’ŒæœåŠ¡ç«¯ID

- **localId**: å‰ç«¯ç”Ÿæˆçš„UUIDï¼Œç”¨äºæ ‡è¯†æœ¬åœ°æ•°æ®
- **id**: æœåŠ¡ç«¯ç”Ÿæˆçš„UUIDï¼Œç”¨äºæ ‡è¯†æœåŠ¡ç«¯æ•°æ®

### åŒæ­¥é€»è¾‘

1. **é¦–æ¬¡ç™»å½•åŒæ­¥**: ç”¨æˆ·é¦–æ¬¡ç™»å½•æ—¶ï¼Œå°†æœ¬åœ°æ•°æ®åŒæ­¥åˆ°æœåŠ¡ç«¯
2. **é‡å¤æ•°æ®æ£€æµ‹**: é€šè¿‡ `localId` æ£€æµ‹æ˜¯å¦å·²å­˜åœ¨ç›¸åŒæ•°æ®
3. **æ•°æ®æ›´æ–°**: å¦‚æœå­˜åœ¨ç›¸åŒ `localId`ï¼Œåˆ™æ›´æ–°ç°æœ‰è®°å½•
4. **æ–°æ•°æ®åˆ›å»º**: å¦‚æœä¸å­˜åœ¨ç›¸åŒ `localId`ï¼Œåˆ™åˆ›å»ºæ–°è®°å½•

### é˜²é‡å¤æœºåˆ¶

- ä½¿ç”¨ `localId` ä½œä¸ºå”¯ä¸€æ ‡è¯†ç¬¦
- åœ¨åŒæ­¥æ—¶æ£€æŸ¥ `localId` æ˜¯å¦å·²å­˜åœ¨
- é¿å…åˆ›å»ºé‡å¤è®°å½•

## å¼€å‘

### æ•°æ®åº“

ä½¿ç”¨PostgreSQLä½œä¸ºæ•°æ®åº“ï¼Œæ”¯æŒé«˜å¹¶å‘å’Œå¤æ‚æŸ¥è¯¢ã€‚TypeORMä¼šè‡ªåŠ¨åˆ›å»ºæ‰€éœ€çš„è¡¨ç»“æ„ã€‚

### è®¤è¯

ä½¿ç”¨JWTè¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œtokenæœ‰æ•ˆæœŸä¸º7å¤©ã€‚

### æ•°æ®éªŒè¯

ä½¿ç”¨ `class-validator` è¿›è¡Œè¯·æ±‚æ•°æ®éªŒè¯ã€‚

## éƒ¨ç½²

### ç¯å¢ƒå˜é‡

ç¡®ä¿è®¾ç½®æ­£ç¡®çš„ç¯å¢ƒå˜é‡ï¼š

- `JWT_SECRET`: JWTç­¾åå¯†é’¥
- `DB_TYPE`: æ•°æ®åº“ç±»å‹ (postgres)
- `DB_HOST`: æ•°æ®åº“ä¸»æœºåœ°å€
- `DB_PORT`: æ•°æ®åº“ç«¯å£
- `DB_USERNAME`: æ•°æ®åº“ç”¨æˆ·å
- `DB_PASSWORD`: æ•°æ®åº“å¯†ç 
- `DB_DATABASE`: æ•°æ®åº“åç§°
- `PORT`: æœåŠ¡ç«¯å£

### ç”Ÿäº§ç¯å¢ƒ

1. è®¾ç½®å¼ºå¯†ç çš„JWTå¯†é’¥
2. ä½¿ç”¨æ•°æ®åº“è¿ç§»è€Œä¸æ˜¯ `synchronize: true`
3. é…ç½®é€‚å½“çš„CORSç­–ç•¥
4. ä½¿ç”¨HTTPS
